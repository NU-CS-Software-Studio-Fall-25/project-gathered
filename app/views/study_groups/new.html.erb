<turbo-frame id="new_group_form">
  <div class="rounded-lg border border-white/10 bg-white/5 p-4 transition hover:bg-white/8"
       data-controller="study-groups">
    <div class="flex items-start justify-between gap-4 mb-3">
      <h4 class="text-lg font-semibold text-white">Create New Study Group</h4>
      <button type="button"
              class="text-slate-400 hover:text-white transition text-xl leading-none -mt-1 cursor-pointer"
              data-action="click->study-groups#closeForm">âœ•</button>
    </div>

    <%= form_with model: @study_group, 
                  url: course_study_groups_path(@course),
                  class: "space-y-3",
                  data: { turbo_frame: "new_group_form" } do |f| %>
      
      <div>
        <%= f.label :topic, "Topic *", class: "block text-xs font-medium text-slate-300 mb-1" %>
        <%= f.text_field :topic, 
                        required: true, 
                        placeholder: "e.g., Midterm Review, Problem Set 3",
                        class: "w-full rounded-lg border border-white/20 bg-white/10 px-3 py-1.5 text-sm text-slate-100 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-violet-400/70 focus:border-transparent transition" %>
        <% if @study_group.errors[:topic].any? %>
          <span class="text-xs text-red-300 mt-0.5 block"><%= @study_group.errors[:topic].first %></span>
        <% end %>
      </div>

      <div>
        <%= f.label :description, "Description", class: "block text-xs font-medium text-slate-300 mb-1" %>
        <%= f.text_area :description, 
                       rows: 2,
                       placeholder: "What will you be studying?",
                       class: "w-full rounded-lg border border-white/20 bg-white/10 px-3 py-1.5 text-sm text-slate-100 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-violet-400/70 focus:border-transparent transition resize-none" %>
      </div>

      <div>
        <%= f.label :location, "Location", class: "block text-xs font-medium text-slate-300 mb-1" %>
        <%= f.text_field :location, 
                        placeholder: "e.g., Main Library Room 201",
                        class: "w-full rounded-lg border border-white/20 bg-white/10 px-3 py-1.5 text-sm text-slate-100 placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-violet-400/70 focus:border-transparent transition" %>
      </div>

      <div class="grid grid-cols-2 gap-2">
        <div>
          <%= f.label :start_time, "Start Time *", class: "block text-xs font-medium text-slate-300 mb-1" %>
          <%= f.datetime_field :start_time, 
                              required: true,
                              class: "w-full rounded-lg border border-white/20 bg-white/10 px-3 py-1.5 text-sm text-slate-100 focus:outline-none focus:ring-2 focus:ring-violet-400/70 focus:border-transparent transition" %>
          <% if @study_group.errors[:start_time].any? %>
            <span class="text-xs text-red-300 mt-0.5 block"><%= @study_group.errors[:start_time].first %></span>
          <% end %>
        </div>

        <div>
          <%= f.label :end_time, "End Time *", class: "block text-xs font-medium text-slate-300 mb-1" %>
          <%= f.datetime_field :end_time, 
                              required: true,
                              class: "w-full rounded-lg border border-white/20 bg-white/10 px-3 py-1.5 text-sm text-slate-100 focus:outline-none focus:ring-2 focus:ring-violet-400/70 focus:border-transparent transition" %>
          <% if @study_group.errors[:end_time].any? %>
            <span class="text-xs text-red-300 mt-0.5 block"><%= @study_group.errors[:end_time].first %></span>
          <% end %>
        </div>
      </div>

      <%= f.hidden_field :creator_id, value: current_student&.student_id %>

      <%= f.submit "Create Study Group", class: "w-full cursor-pointer inline-flex items-center justify-center rounded-md bg-violet-600/90 px-3 py-1.5 text-sm font-medium text-white hover:bg-violet-500/90 transition" %>
    <% end %>
  </div>
</turbo-frame>

